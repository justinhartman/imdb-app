<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= APP_NAME %> <%= APP_SUBTITLE _%></title>
    <meta name="description" content="<%= APP_DESCRIPTION _%>">
<%- include('./partials/meta/base.ejs') -%>
<%- include('./partials/meta/og-index.ejs') -%>
<%- include('./partials/ld/index.ejs') -%>
</head>
<%- include('./partials/navigation.ejs') -%>
    <!-- New Movies -->
    <div class="container mb-4">
        <%- include('./partials/alerts.ejs') -%>
        <h1 class="display-4 my-4 text-warning">New Movies</h1>
        <div class="d-none d-md-block position-relative">
            <button class="scroll-button left h-25 rounded-3" data-target="#movies-row"><i class="bi-chevron-left"></i></button>
            <div id="movies-row" class="row flex-nowrap scroll-row">
                <% newMovies.forEach(movie => { %>
                    <%-include(`./partials/${card}.ejs`, {
                        url: `${APP_URL}/view/${movie.imdb_id}/movie`,
                        poster: movie.poster,
                        title: movie.title,
                        id: movie.imdb_id,
                        type: 'movie'
                    })%>
                <% }); %>
            </div>
            <button class="scroll-button right h-25 rounded-3" data-target="#movies-row"><i class="bi-chevron-right"></i></button>
        </div>
        <div class="d-block d-md-none">
            <div class="row">
                <% newMovies.slice(0,12).forEach(movie => { %>
                    <%-include(`./partials/${card}.ejs`, {
                        url: `${APP_URL}/view/${movie.imdb_id}/movie`,
                        poster: movie.poster,
                        title: movie.title,
                        id: movie.imdb_id,
                        type: 'movie'
                    })%>
                <% }); %>
            </div>
        </div>
    </div>

    <hr class="border border-secondary border-2 opacity-50">

    <!-- New TV Shows -->
    <div class="container mb-4">
        <h1 class="display-4 my-4 text-warning">New TV Shows</h1>
        <div class="d-none d-md-block position-relative">
            <button class="scroll-button left h-25 rounded-3" data-target="#series-row"><i class="bi-chevron-left"></i></button>
            <div id="series-row" class="row flex-nowrap scroll-row">
                <% newSeries.forEach(series => { %>
                    <%-include(`./partials/${card}.ejs`, {
                        url: `${APP_URL}/view/${series.imdb_id}/series`,
                        poster: series.poster,
                        title: series.title,
                        id: series.imdb_id,
                        type: 'series'
                    })%>
                <% }); %>
            </div>
            <button class="scroll-button right h-25 rounded-3" data-target="#series-row"><i class="bi-chevron-right"></i></button>
        </div>
        <div class="d-block d-md-none">
            <div class="row">
                <% newSeries.slice(0,12).forEach(series => { %>
                    <%-include(`./partials/${card}.ejs`, {
                        url: `${APP_URL}/view/${series.imdb_id}/series`,
                        poster: series.poster,
                        title: series.title,
                        id: series.imdb_id,
                        type: 'series'
                    })%>
                <% }); %>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.scroll-button').forEach(btn => {
                btn.addEventListener('click', function() {
                    const container = document.querySelector(this.dataset.target);
                    const amount = container.clientWidth;
                    container.scrollBy({ left: this.classList.contains('left') ? -amount : amount, behavior: 'smooth' });
                });
            });
        });
    </script>
<%- include('./partials/footer.ejs') -%>
